<html>
  <head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
var JSONURL = 'https://spreadsheets.google.com/feeds/list/1yUkYl1H2imvxxyDTPTAz5bkauHQC-Ch5BaWUuYw2vV8/1/public/basic?alt=json';
  
var jsondata;

$(document).ready(function(){
   
    $.getJSON(JSONURL, function(data){
      jsondata = data;
    var places = "";
    for(var i = 0; i < jsondata.feed.entry.length; i++){
       
       //array é um array que recebe todo o conteúdo de content separado por ,
       var array = jsondata.feed.entry[i].content.$t.split(",");
       console.log(i+" Array content:");
       console.log(array);
       
       var local = jsondata.feed.entry[i].title.$t; //Variável onde fica armazenada o nome do local
       console.log(i+" Variavel local: "+local);
       
       var lat = array[0].split(" "); //Array que recebe o trecho de latitude do content, sendo que lat[1] é a latitude em números
       console.log(i+" Array lat:");
       console.log(lat);
       console.log(i+" Latitude (lat[1]) : "+lat[1]);
       
       var longi = array[1].split(" "); //Array que recebe o trecho de longitude do content, sendo que longi[2] é a longitude em números
       console.log(i+" Array longi:");
       console.log(longi);
       console.log(i+" Latitude (longi[2]) : "+lat);
       
       
    }
    });

 
 

  //<link rel="stylesheet" type="text/css" href="final.css">
  <style>
    #map{
  width:100%;
  height: 400px;
}
</style>
<script>
function goBack() {
    window.history.back();
}
</script>

<script src="final.js"></script>
<title>Volunteen - Find a Volunteer Job</title>
  </head>

    <body>
<h1 id="home">Find Places to Volunteer</h1>
<center>
<img src="head2.png" height="60%">
  <!--Navigation bar-->
<center>  
<nav class="navbar">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="#">Volunteen</a>
    </div>
    <center>
    <ul class="nav navbar-nav">
      <li><a href="file:///C:/Users/Girls%20Who%20Code/2016_SIP_Microsoft_NYC_Volunteer/homepage.html">Home</a></li>
      <li><a href="file:///C:/Users/Girls%20Who%20Code/2016_SIP_Microsoft_NYC_Volunteer/map.html">Find Volunteer Jobs</a></li>
      <li><a href="file:///C:/Users/Girls%20Who%20Code/2016_SIP_Microsoft_NYC_Volunteer/formpage.html">Add your volunteer job to our map</a></li> 
      <li><a href="file:///C:/Users/Girls%20Who%20Code/2016_SIP_Microsoft_NYC_Volunteer/description.html">Description</a></li> 
      <li><a onclick="goBack()">Back</a></li> 
    </ul>
  </div>
</nav>


<!--end of bar-->
<div class="body">

<!--PUT TEXT HERE-->

<div id="map"></div>

    <div id="places"></div>

    

     
    <script>
    var volunteerplaces;
    $.getJSON('volunteerdata.json', function(data){
        volunteerplaces = data;

    })


      function initMap(){


          var mapDiv = document.getElementById('map');
            var map = new google.maps.Map(mapDiv,{
              center: {lat: 40.735863, lng: -73.975368},
              zoom: 8

        });


        //    var contentString = 'New York Cares </br> 214 W. 29th St. </br> New York, NY 10001 </br> (212)-228-5000 </br> <a href="http://www.nycares.org">nycares.org</a>'


//            var contentString2 = 'Citymeals on Wheels </br> 355 Lexington Ave. </br> New York, NY 10017 </br> (212)-687-1234 </br> <a href="http://www.citymeals.org">citymeals.org</a>'

  //          var contentString3 = 'The American Red Cross </br> 520 W. 49th St. </br> New York, NY </br> (877)-REDCROSS </br> <a href="http://www.nyredcross.org">nyredcross.org</a>'    
                        
    //        var contentString4 ='Food Bank for New York City </br> 39 Broadway </br> New York, NY 10006 </br> (212) 566-7855 </br> <a href="http://www.foodbanknyc.org">foodbanknyc.org</a>' 


   

            var infowindow = new google.maps.InfoWindow({
              content: contentString
            });

            var infowindow2 = new google.maps.InfoWindow({
              content: contentString2
            });

            var infowindow3 = new google.maps.InfoWindow({
              content: contentString3
            });

            var infowindow4 = new google.maps.InfoWindow({
              content: contentString4
            }); 


              var image ="leaf.png";
              var image2 ="food.png";
              var image3 ="health2.png";

             for(var i = 0; i < jsondata.feed.entry.length; i++){
            
               var mylatlng = {lat: lat[i], lng: longi[i]}
       
              var marker = new google.maps.Marker({
              position: mylatlng,
              map: map,
              title: local,
              icon: image
              
              });

              marker.addListener('click', function() {
                infowindow4.open(map, marker4);
              });  
            }

      }

    

    </script>

    <script async defer
       src="https://maps.googleapis.com/maps/api/js?&callback=initMap">
     </script>  
  
<!--End of the text-->
<div class="body">

<br>
<br>
<br><br>
<br>
<br>




    </body>
</html>